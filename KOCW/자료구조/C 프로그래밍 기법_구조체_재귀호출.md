# C 프로그래밍 기법: 구조체&재귀호출

### 구조체

- 구조체도 배열처럼 여러 개의 데이터를 그룹으로 묶어서 하나의 자료형으로 정의하고 사용하는 자료형
    - 배열은 같은 자료형 만을 그룹으로 묶을 수 있지만, 구조체는 서로 다른 자료형을 그룹으로 묶을 수 있으므로 복잡한 자료 형태를 저으이하는데 유용하게 사용
- 여러 자료형의 필드를 가지고 있는 레토드를 만들 때 구조체 사용
- 필드, 레코드, 파일의 개념
  
  
    | 가나다 | 2021년 입사 | 5400 |
    | --- | --- | --- |
    | 라마바 | 2022년 입사 | 5500 |
    - 가나다, 라마바 열은 필드 == 속성
        - 쪼갤 수 없는 가장 작은 논리적 단위
    - 가나다 전체 행은 레코드 == 튜플
    - 표는 하나의 파일

### 구조체 선언

- 여러 자료형의 변수들을 그룹으로 묶어서 하나의 자료형으로 선언
- 구조체이름, 자료형, 데이터 항목으로 구성
    - 구조체의 이름 : 구조체로 정의하는 새로운 자료형의 이름
    - 항목 : 구조체를 구성하는 내부 변수들의 이름
        - 구조체의 항목은 배열의 각 배열요소에 해당
        - 배열요소는 모두 같은 자료형으로 되어있으므로 배열요소에 대한 선언없이 사용이 가능하지만, 구조체에서는 각 항목이 다른 자료형을 가질 수 있기 때문에 항목별로 자료형과 항목이름(변수이름)을 선언해야
- 구조체형의 선언
  
    ```c
    struct 구조체형이름 {
    	자료형 항목1;
    	자료형 항목2;
    	...
    	자료형 항목n;
    }
    ```
    
- 사용 형식
  
    ```c
    struct 구조체형이름 구조체변수이름;
    ```
    
- 구조체 사용 단계
    1. 구조체형 선언 : 내부 구조를 정의
    2. 구조체 변수 선언 : 구조체형에 따른 변수를 선언
    3. 구조체 변수의 사용 : 내부 항목에 데이터를 저장하고 사용
- 구조체형 employee 선언
  
    ```c
    struct employee {
    	char name[10];
    	int year;
    	int pay;
    };
    ```
    
- 구조체형 employee에 대한 구조체 변수 선언
  
    ```c
    struct employee Lee, Kim, Park;
    ```
    
    - 그럼 Lee, Kim, Park 따로 위의 employee 구조체를 하나씩 가진다.
- 구조체 변수의 선언 방법
    - 구조체형을 선언한 후에 구조체 변수 선언
      
        ```c
        struct employee {
        	char name[10];
        	int year;
        	int pay;
        }
        ```
        
    - 구조체형과 구조체 변수를 연결하여 선언
      
        ```c
        struct employee {
        	char name[10];
        	int year;
        	int pay;
        } Lee;
        ```
        
    - 구조체형 이름을 생략하고 구조체 변수 이름만 선언
        - 다음에 구조체를 가지는 변수가 없으면 사용 가능
        
        ```c
        struct {
        	char name[10];
        	int year;
        	int pay;
        } Lee;
        ```
        

### 구조체의 변수의 초기화

- 일반 변수 초기화와 마찬가지로 구조체 변수를 초기화하려면 구조체 변수를 선언하면서 변수의 초기값 지정
- 일반 변수는 값을 하나만 가지므로 초기값도 하나지만, 구조체는 내부 항목이 여러 개일 수 있으므로 내부 항목의 자료형과 개수를 순서에 맞추어 초기값 리스트로 지정하고 중괄호({}) 사용
- 예시
  
    ```c
    struct employee ( // 구조체형 선언
    	char name[10];
    	int year;
    	int pay;
    }
    struct employee Lee = {"Kee", 2022, 5000}; // 구조체 변수의 초기화
    ```
    
    - 초기화 할 때 순서가 다르면 안 됨

### 데이터 항목의 참조

- 구조체 연산자를 사용하여 구조체 변수에 있는 각 데이터 항목 참조
- 구조체 연산자 종류
    - 점 연산자 : .
        - 구조체 변수에 있는 데이터 항목을 개별적으로 지정할 때 사용
        1. struct employee Lee;
        2. Lee.name = “Kee”;
        3. Lee.year = 2022;
        4. Lee.pay = 5000;
    - 화살표 연산자 : →
        - 구조체 포인터 변수에서 포인터가 가리키는 구조체 변수의 데이터 항목을 지정하기 위하여 화살표 연산자 사용
        1. struct employee Kee;
        2. struct employee *Sptr = &Kee;
            1. Sptr은 Kee의 주소를 가리킨다.
            2. Kim이라는 레코드의 시작점을 가리킴
        3. Sptr→name = “haha”;
        4. Sptr→year = 2022;
        5. Sptr→pay = 5500;
        - 참조 연산자 사용시
            - 괄호를 뺀다면?
                - 오류발생
                - 왜?
                    - 괄호를 하지 않으면 *(Sptr.name)로 우선 순위가 되어버려서
            1. (*Sptr).name = “haha”;
            2. (*Sptr).year = 2022;
            3. (*Sptr).pay = 5500;

### 데이터 항목 참조 연산

- 점 연산자와 화살표 연산자를 이용하여 구조체 데이터 항목을 개별적으로 참조

```c
struct employee Lee;
struct employee *Sptr;
Sptr = &Lee;
Lee.year = 2022;
Sptr->pay = 5000;
Sptr->name = "Kee";
```

### 구조체 변수 복사 연산

- 같은 구조체에 있는 구조체 변수들끼리 내용을 한 번에 복사하는 연산

```c
struct employee Lee, Kim, team[3]; //team[3]은 구조체를 가지는 배열
```

```c
Lee = Kim;
Lee = team[2];
team[2] team[3];
```

- 왼쪽과 오른쪽이 같은 구조체여야

### 구조체 변수의 주소 구하기 연산

- 포인터의 주소 연산자를 사용하여 구조체 변수의 주소를 구하거나
- 구조체 변수가 배열인 경우에는 배열의 특성에 따라 구조체 배열 변수의 이름에서 주소를 구할 수 있음

```c
struct employee Lee, team[3];
struct employee *Sptr1, *Sptr2;

Sptr1 = &Lee; // Lee의 주소
Sptr2 = team; // 배열의 이름(배열의 첫 번째 주소를 가리킴) => team = &team[0]
```

### 재귀호출(순환호출) = Recursive

- 자기 자신을 호출하여 순환이 수행되는 것
- 함수 실행 특성에 따라 일반적인 호출방식보다 재귀호출방식을 사용하여 함수를 만들면 프로그램의 크기를 줄이고 간단하게 작성 가능
- 내가 나를 호출하는 것이므로 내 현재 작업을 처리하기 위해 같은 유형의 하위 작업이 필요
    - 하위 작업 : 현재 수행 중인 작업의 하위 단계, 즉 좀 더 작은 단위 작업
- 전체 문제를 한 번에 해결하기보다 같은 유형의 하위 작업으로 분할하여 작은 문제부터 해결하는 방법이 효율적인 경우 사용
- 베이스케이스
    - 재귀호출하는 과정을 반복하다 보면, 한 번에 해결할 수 있을 정도로 분할된 작업 단위가 충분히 작아지는 단계

### 팩토리얼 함수

- n에 대한 팩토리얼 함수는 1부터 n까지 모든 자연수를 곱하는 연산
- 1! = 1(베이스 케이스)

### 피보나치 수열

- q1 =1, q2 =1
- qn = qn-1 + qn-2

### 하노이 탑

- 복잡한 재귀 구조 문제 해별을 위한 방법
    - 하나의 축에 크기가 다른 원반이 쌓여 있음
    - 작은 원반 위에 큰 원반이 놓여지지 않도록 함
    - 제3의 축을 이용하여 한 번에 한 장식 움직여 다른 축으로 원반을 이동시키는 문제