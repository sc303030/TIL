# R_03

### lapply(), sapply()

```r
> class(lapply(iris[,1:4],mean))
[1] "list"
> class(sapply(iris[,1:4],mean))
[1] "numeric"
```

- `sapply()` 는 데이터 형식을 행렬, 벡터 등의 데이터 타입으로 반환한다.

### split(feature,분류기준)

```r
irisSlMedian <- sapply(split(iris$Sepal.Length,iris$Species),median, na.rm =T) 
> irisSlMedian
    setosa versicolor  virginica 
       5.0        5.9        6.5 
```

- na.rm =T 결측치를 제외하고 중위값을 구하겠다.

- 종을 기준으로 `Sepal.Length` 의 값을 구한다.

```r
> class(irisSlMedian)
[1] "numeric"
```

```r
> iris[1,1] = NA
> head(iris)
  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1           NA         3.5          1.4         0.2  setosa
2          4.9         3.0          1.4         0.2  setosa
3          4.7         3.2          1.3         0.2  setosa
4          4.6         3.1          1.5         0.2  setosa
5          5.0         3.6          1.4         0.2  setosa
6          5.4         3.9          1.7         0.4  setosa
```

- 1행과 1열의 값을 `NA` 로 바꾼다.

```r
> iris <- within(
+   iris, {
+     Sepal.Length <- ifelse(is.na(Sepal.Length), irisSlMedian[iris$Species], Sepal.Length)
+   }
+ )
> head(iris)
  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1          5.0         3.5          1.4         0.2  setosa
2          4.9         3.0          1.4         0.2  setosa
3          4.7         3.2          1.3         0.2  setosa
4          4.6         3.1          1.5         0.2  setosa
5          5.0         3.6          1.4         0.2  setosa
6          5.4         3.9          1.7         0.4  setosa
```

- 위의 `NA` 의 값을 평균으로 바꾼다. 

### subset(data, 조건)

> 부분집합을 만들겠다. 필요한 데이터만 추출해서 가져오겠다.

```r
x <- 1:5
y <- 6:10
z <- letters[1:5]
exampleDF <- data.frame(x,y,z)
> exampleDF
  x  y z
1 1  6 a
2 2  7 b
3 3  8 c
4 4  9 d
5 5 10 e
```

```r
> str(exampleDF)
'data.frame':	5 obs. of  3 variables:
 $ x: int  1 2 3 4 5
 $ y: int  6 7 8 9 10
 $ z: chr  "a" "b" "c" "d" ...
```

#### x의 값이 3이상인 결과를 새로운 데이터 프레임으로 만들어보자.

```r
subDF01 <- subset(exampleDF, x >=3)
> subDF01
  x  y z
3 3  8 c
4 4  9 d
5 5 10 e
```

#### y의 값이 8이하인 결과를 새로운 데이터 프레임으로 만들어보자.

```r
subDF02 <- subset(exampleDF, y <= 8)
> subDF02
  x y z
1 1 6 a
2 2 7 b
3 3 8 c
```

#### z의 값이 2이상이고  y의 값이 8이하인 새로운 데이터 프레임으로 만들어보자.

```r
subDF03 <- subset(exampleDF, z >=2 & y <= 8)
> subDF03
  x y z
1 1 6 a
2 2 7 b
3 3 8 c
```

#### 컬럼선택도 가능하다.

```r
subDF2 <- subset(exampleDF, select=c(x,y))
> subDF2
  x  y
1 1  6
2 2  7
3 3  8
4 4  9
5 5 10
```

```r
subDF2 <- subset(exampleDF,x >=3 ,select=c(x,y))
> subDF2
  x  y
3 3  8
4 4  9
5 5 10
```

### petal.length 평균구하라.

```r
> mean(iris$Petal.Length)
[1] 3.758
```

```r
irisSPS <- subset(iris, Petal.Length >= mean(iris$Petal.Length), select = c(Sepal.Length, Petal.Length, Species) )
> head(irisSPS)
   Sepal.Length Petal.Length    Species
51          7.0          4.7 versicolor
52          6.4          4.5 versicolor
53          6.9          4.9 versicolor
54          5.5          4.0 versicolor
55          6.5          4.6 versicolor
56          5.7          4.5 versicolor
```

- `iris` 에서 `Petal.Length` 의 값이 평균 이상인 것들 중에서 `Sepal.Length` ,`Petal.Length` , `Species` 컬럼만 추출한다.

```r
> str(irisSPS)
'data.frame':	93 obs. of  3 variables:
 $ Sepal.Length: num  7 6.4 6.9 5.5 6.5 5.7 6.3 6.6 5.2 5.9 ...
 $ Petal.Length: num  4.7 4.5 4.9 4 4.6 4.5 4.7 4.6 3.9 4.2 ...
 $ Species     : Factor w/ 3 levels "setosa","versicolor",..: 2 2 2 2 2 2 2 2 2 2 ..
```

